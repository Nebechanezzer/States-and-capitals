<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gmail</title>
  <link rel="icon" href="games/Thumbnail.jpg" />
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; background: #111; color: #eee; text-align: center; }
    header { background: #222; padding: 1em; font-size: 2em; }
    #gameList { display: flex; flex-wrap: wrap; justify-content: center; padding: 1em; }
    .gameButton { margin: 0.5em; padding: 1em 2em; font-size: 1em; cursor: pointer; background: #444; color: white; border: none; border-radius: 5px; transition: background 0.3s; }
    .gameButton:hover { background: #666; }
    #gameFrame { width: 100vw; height: 100vh; border: none; display: none; }
    #backButton { position: absolute; top: 10px; left: 10px; font-size: 1em; padding: 0.5em 1em; background: #333; color: white; border: none; border-radius: 5px; display: none; z-index: 1000; cursor: pointer; }
    footer { background: #222; padding: 1em; font-size: 0.9em; color: #aaa; }
  </style>
</head>
<body>
  <header>Games</header>
  <button id="backButton" onclick="exitGame()">&larr; Return to games</button>
  <div id="gameList"></div>
  <iframe id="gameFrame"></iframe>
  <footer id="footer">Tip: If games donâ€™t show up, clear your browser cache.</footer>
  <button class="gameButton" onclick="downloadStandalone()">Game Downloader</button>
  <script>
    const rawBase = "https://raw.githubusercontent.com/USERNAME/REPO/main/games/";

    async function loadGames() {
      try {
        const res = await fetch("games/manifest.json?" + Date.now());
        const games = await res.json();
        const container = document.getElementById("gameList");
        container.innerHTML = "";
        games.forEach(name => {
          const btn = document.createElement("button");
          btn.className = "gameButton";
          btn.textContent = name.replace(/\.html$/, "");
          btn.onclick = () => playGame(name.replace(/\.html$/, ""));
          container.appendChild(btn);
        });
      } catch (e) {
        console.error("Error loading games:", e);
      }
    }

    function playGame(gameName) {
      document.getElementById("gameList").style.display = "none";
      document.getElementById("footer").style.display = "none";
      document.getElementById("backButton").style.display = "block";
      const iframe = document.getElementById("gameFrame");
      iframe.src = `games/${gameName}.html`;
      iframe.style.display = "block";
    }

    function exitGame() {
      const iframe = document.getElementById("gameFrame");
      iframe.src = "";
      iframe.style.display = "none";
      document.getElementById("gameList").style.display = "flex";
      document.getElementById("footer").style.display = "block";
      document.getElementById("backButton").style.display = "none";
      loadGames();
    }

    function downloadStandalone() {
      const html = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gmail</title>
  <link rel="icon" href="${rawBase}Thumbnail.jpg" />
</head>
<body>
  <h1>Games</h1>
  <ul id="gameList"></ul>
  <script>
    const games = fetch("${rawBase}manifest.json?" + Date.now())
      .then(res => res.json())
      .then(list => {
        const container = document.getElementById("gameList");
        list.forEach(name => {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = "${rawBase}" + name;
          a.textContent = name.replace(/\.html$/, "");
          a.target = "_blank";
          li.appendChild(a);
          container.appendChild(li);
        });
      });
  </script>
</body>
</html>`;
      const blob = new Blob([html], { type: "text/html" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "standalone.html";
      a.click();
    }

    loadGames();
  </script>
</body>
</html>
