<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gmail</title>
  <link rel="icon" type="image/png" href="thumbnail.png">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .card {
      background: #222;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: transform 0.2s;
      position: relative;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .card h3 {
      font-size: 16px;
      margin: 10px 0;
      color: #fff;
      word-break: break-word;
    }
    .card button {
      display: block;
      width: 100%;
      padding: 8px;
      margin-top: 8px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }
    .card button:hover {
      background: #0056b3;
    }
    .fullscreen-iframe {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border: none;
      z-index: 9999;
      display: none;
    }
    .close-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 10000;
      background: red;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      font-size: 20px;
      display: none;
    }
    footer {
      text-align: center;
      padding: 15px;
      font-size: 14px;
      color: #bbb;
    }
  </style>
</head>
<body>
  <header>Gmail</header>
  <div class="grid" id="gamesGrid"></div>
  <iframe id="gameFrame" class="fullscreen-iframe"></iframe>
  <button id="closeBtn" class="close-btn">×</button>
  <footer>Made by Nebechanezzer<br><a href="html.html" download="html.html" style="color:#4da6ff;">⬇ Download Offline Version</a></footer>

  <script>
    async function loadGames() {
      const res = await fetch("games/manifest.json");
      const files = await res.json();
      const grid = document.getElementById("gamesGrid");

      files.forEach(file => {
        // Remove .html extension for title
        const title = file.replace(/\.html$/i, "");
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <h3>${title}</h3>
          <button onclick="playGame('games/${file}')">▶ Play</button>
          <button onclick="downloadGame('games/${file}', '${file}')">⬇ Download</button>
        `;
        grid.appendChild(card);
      });
    }

    function playGame(url) {
      const iframe = document.getElementById("gameFrame");
      const closeBtn = document.getElementById("closeBtn");
      iframe.src = url;
      iframe.style.display = "block";
      closeBtn.style.display = "block";
    }

    document.getElementById("closeBtn").onclick = () => {
      const iframe = document.getElementById("gameFrame");
      iframe.src = "";
      iframe.style.display = "none";
      document.getElementById("closeBtn").style.display = "none";
    };

    function downloadGame(url, filename) {
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    loadGames();
  </script>
</body>
</html>
